query getCategories($stage: Stage!) {
  categories(stage: $stage) {
    id
    title
    slug
    color
    backgroundVideo {
      mimeType
      url
    }
  }
}

query getHeader($stage: Stage!) {
  categories(stage: $stage) {
    id
    title
    slug
    color
  }
}

query getCategory($slug: String!, $stage: Stage!) {
  category(where: { slug: $slug }, stage: $stage) {
    id
    title
    description
    slug
    color
    content {
      markdown
    }
    pieces {
      id
      title
      slug
    }
  }
}

query getPiece($slug: String!, $stage: Stage!) {
  piece(where: { slug: $slug }, stage: $stage) {
    id
    title
    description
    slug
    category {
      title
      color
    }
    content {
      markdown
    }
    photos {
      jpg: url(
        transformation: {
          image: { resize: { width: 1000, height: 1000, fit: max } }
          document: { output: { format: jpg } }
        }
      )
      webp: url(
        transformation: {
          image: { resize: { width: 1000, height: 1000, fit: max } }
          document: { output: { format: webp } }
        }
      )
    }
    related {
      id
      title
      slug
      category {
        title
        color
      }
    }
  }
}

/*
    SideNav
            */  

nav#sideNav{

  // container 
  //transition: all 0.5s ease-in-out, width 0s, margin 0s, padding 0s, left 0s;
  box-sizing: border-box;
  z-index: 5;  
  //*{border: 1px solid;}
  li.cat{
    ul.item-container{
      h1{@include f1-s0();}
      li.item{
        img.cover{
          transition: all .25s ease-in-out;//0s, height .25s ease, width .25s ease;   
        }
      }
    }
  }


  // Sort Options
  .sort-options{
    height: $baseline*2;
    z-index: 5;

    *{transition: .25s ease-in-out;}

    p{
      position: absolute;
      right: 100%;
      
    }

    ul{
      overflow: hidden;
      max-height: $font-size;
      @include flex();
      @include flex-direction(column);

      li{
        padding: 0 $unite/4 $baseline/2 $unite/4;
        order: 2;
        &:first-of-type{opacity: 0;}
        label{cursor: pointer;}
      }
    }

    &:hover{
      ul{
        max-height: $baseline*10;
        li:first-of-type{opacity: 1;}
      }
    }
  }

}

  
//
//    ||| →            
//
body#categorie{

  nav#sideNav{

    width: 100vw;
    @include for-size(desktop){ left: $unite*-4;}

    > label{ opacity: 0; position: absolute;}

    *{user-select: none;}


    /*
      Sort
            */
    @for $i from 0 through 10{
      input[id$="sort-#{$i}"]:checked ~ .sort-options li[data-for="sort-#{$i}"]{
        order: 1;
        font-weight: $bold;
      }
    }

    .sort-options{
      position: absolute;
      right: $unite;
      top: 0;
    }

    input[id$="sort-0"]:checked ~ .sort-options:not(:hover) p{right: 0;}

    > ul.cat-container{
      width: auto;
      height: 100%;
      
      overflow: scroll hidden;
      white-space: nowrap;
      //scroll-snap-type: x mandatory;   
      @include for-size(desktop){ padding: 0 #{$unite*4};}
  
      #scrollTrigger{display: none;}

      li.cat{
        display: inline-block;
        padding-right: $unite*4;
        vertical-align: top;
        label{
          position: sticky;
          top: 0;
          left: 0;
          margin: $baseline*2 0; 

        }

        ul.item-container {
          @include flex();
          @include flex-direction(row);
          @include align-items(center);          
          li.item{
            display: inline-block;
            white-space: nowrap;
            margin: $baseline $unite/2 $baseline 0;
            //scroll-snap-align: start;

            img.cover{
              width: 20vw;
              
              &:hover{ transform: scale(1.5); }           
            }
          }
        }
      }
    }

    > ul.cat-container:not(.noJS){
      scrollbar-width: none;
      &::-webkit-scrollbar{display: none;}
      // Scroll Button
      &~#scrollTrigger{
        display: inline-block;
        position: absolute;
        bottom: $baseline*-3;
        right: $unite*.75;
        width: $unite;
        height: 100%;
        padding: $baseline 0 $baseline $unite/2;
        background: transparent;
        cursor: pointer;

        svg{transform: scaleY(200%);}
      }

    }
    

  }
 
  &[data-categorie="1"] nav#sideNav li.cat:not([data-categorie="1"]){display: none;}
  &[data-categorie="2"] nav#sideNav li.cat:not([data-categorie="2"]){display: none;}
  &[data-categorie="3"] nav#sideNav li.cat:not([data-categorie="3"]){display: none;}

}


//
//    ☰ 
//    ↓
body#piece, body#info{

  #scrollTrigger{display: none;}

  nav#sideNav{
    position: fixed;
    transition:  transform .25s ease-in-out;

    @include for-size(phone){
      width: 90vw;
      height: 100vh;
      top: 0;
      left: calc(-90vw + #{$unite*2});
      &:hover{
        border-right: 1px solid currentColor;
        background: white;
      }    
    }
    @include for-size(desktop){
      width: $unite*10;
      height: 100vh;
      //height: calc(100vh - #{$baseline*7});
      transform: translateX(#{$unite*-8});
      left: 0;
      top: 0;
    }

    // Sort Options
    .sort-options{
      position: absolute;
      right: 0;
      bottom: 0;
    }

    // Toggle Button
    label[for="toggle-sideNav"]{
      content: "Pièces";
      @include f1-s0();
      cursor: pointer;
      position: absolute;
      top: $baseline*5;
      right: 0;
      padding: .5rem $unite/2 .5rem 0;
      opacity: 1;
      border-bottom: 1px solid currentColor;
      transform: rotate(90deg);
      transition: opacity .25s ease-in-out;
      z-index: 2;

      @include for-size(desktop){top: $baseline*3.5;}
    }

    // inside behavior
    ul.cat-container{

      overflow: visible scroll;
      -ms-overflow-style: none;
      scrollbar-width: none;
      &::-webkit-scrollbar {display: none;}
      scroll-snap-type: y mandatory;
      height: 100%;
      padding: $baseline*3 $unite $baseline*2 $unite;

      li.cat{
        margin: 0 0 $baseline*2 0;
        //scroll-snap-align: start;
        overflow: hidden;
        ul.item-container{
          @include flex();
          @include flex-direction(column);
          @include align-items(flex-start);
          gap: 0;
          margin: $baseline/2 0;
          li.item{
            margin: $baseline/6 0;
            scroll-snap-align: start;
            transition: all .25s ease, max-height .5s ease-in-out, margin 0s;
            max-height: 150px;
            cursor: pointer;
            
            img.cover{
              height: 75px;
              max-height: 150px;
              //transform-origin: left;
              &:hover{height: 150px;}
            }
          }
        }
      }
    }

    // Collapse unecessary Category
    input[name="toggle-c"]:not(:checked) ~ ul li.item{
      max-height: 0; overflow: hidden; margin: 0;
    }
  }
  // Open / Close
  nav#sideNav:hover, 
  nav#sideNav:focus, 
  input#toggle-sideNav:checked + nav#sideNav{
    transform: translateX(0);
  }  
}